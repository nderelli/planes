(function(e,t,n,r){function i(t,n,r,i){var s={duration:1,animation:null,iterate:1,timing:"linear",keep:!1};this.prefixes=["","-moz-","-o-animation-","-webkit-"];this.element=e(t);this.bare=t;this.queue=[];this.listening=!1;var o=typeof r=="function"?r:i;switch(n){case"blur":s={amount:3,duration:.5,focusAfter:null};this.options=e.extend(s,r);this._blur(o);break;case"focus":this._focus();break;case"rotate":s={degrees:15,duration:.5};this.options=e.extend(s,r);this._rotate(o);break;case"cleanse":this.cleanse();break;default:this.options=e.extend(s,n);this.init(o)}}i.prototype={init:function(t){var n=this;Object.prototype.toString.call(n.options.animation)==="[object Array]"?e.merge(n.queue,n.options.animation):n.queue.push(n.options.animation);n.cleanse();n.animate(t)},animate:function(e){this.element.addClass("animated");this.element.addClass(this.queue[0]);this.element.data("animo",this.queue[0]);var t=this.prefixes.length;while(t--){this.element.css(this.prefixes[t]+"animation-duration",this.options.duration+"s");this.element.css(this.prefixes[t]+"animation-iteration-count",this.options.iterate);this.element.css(this.prefixes[t]+"animation-timing-function",this.options.timing)}var n=this,r=e;n.queue.length>1&&(r=null);this._end("AnimationEnd",function(){if(n.element.hasClass(n.queue[0])){n.options.keep||n.cleanse();n.queue.shift();n.queue.length&&n.animate(e)}},r)},cleanse:function(){this.element.removeClass("animated");this.element.removeClass(this.queue[0]);this.element.removeClass(this.element.data("animo"));var e=this.prefixes.length;while(e--){this.element.css(this.prefixes[e]+"animation-duration","");this.element.css(this.prefixes[e]+"animation-iteration-count","");this.element.css(this.prefixes[e]+"animation-timing-function","");this.element.css(this.prefixes[e]+"transition","");this.element.css(this.prefixes[e]+"transform","");this.element.css(this.prefixes[e]+"filter","")}},_blur:function(n){if(this.element.is("img")){var r="svg_"+((1+Math.random())*16777216|0).toString(16).substring(1),i="filter_"+((1+Math.random())*16777216|0).toString(16).substring(1);e("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" id="'+r+'" style="height:0;position:absolute;top:-1000px;"><filter id="'+i+'"><feGaussianBlur stdDeviation="'+this.options.amount+'" /></filter></svg>');var s=this.prefixes.length;while(s--){this.element.css(this.prefixes[s]+"filter","blur("+this.options.amount+"px)");this.element.css(this.prefixes[s]+"transition",this.options.duration+"s all linear")}this.element.css("filter","url(#"+i+")");this.element.data("svgid",r)}else{var o=this.element.css("color"),s=this.prefixes.length;while(s--)this.element.css(this.prefixes[s]+"transition","all "+this.options.duration+"s linear");this.element.css("text-shadow","0 0 "+this.options.amount+"px "+o);this.element.css("color","transparent")}this._end("TransitionEnd",null,n);var u=this;if(this.options.focusAfter)var a=t.setTimeout(function(){u._focus();a=t.clearTimeout(a)},this.options.focusAfter*1e3)},_focus:function(){var t=this.prefixes.length;if(this.element.is("img")){while(t--){this.element.css(this.prefixes[t]+"filter","");this.element.css(this.prefixes[t]+"transition","")}var n=e("#"+this.element.data("svgid"));n.remove()}else{while(t--)this.element.css(this.prefixes[t]+"transition","");this.element.css("text-shadow","");this.element.css("color","")}},_rotate:function(e){var t=this.prefixes.length;while(t--){this.element.css(this.prefixes[t]+"transition","all "+this.options.duration+"s linear");this.element.css(this.prefixes[t]+"transform","rotate("+this.options.degrees+"deg)")}this._end("TransitionEnd",null,e)},_end:function(e,t,n){var r=this,i=e.toLowerCase()+" webkit"+e+" o"+e+" MS"+e;this.element.bind(i,function(){r.element.unbind(i);typeof t=="function"&&t();typeof n=="function"&&n(r)})}};e.fn.animo=function(e,t,n){return this.each(function(){new i(this,e,t,n)})}})(jQuery,window,document);